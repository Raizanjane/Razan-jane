const axios = require('axios');

module.exports = {
  config: {
    name: "herc",
    version: "1.0.0",
    hasPermission: true,
    description: "Herc.ai LLM Model",
    usePrefix: false,
    credits: "Rui",
    cooldowns: 5
  }, 
  async run({
    api, event, args
  }) {
    const query = args.join(" ");
    
    if (!query) {
      api.sendMessage('âŒ | No query detected! Usage: herc <query>', event.threadID, event.messageID);
      return;
    }
    
    try {
      const userData = await api.getUserInfo(event.senderID);
      const userName = userData[event.senderID].name;
      
      api.setMessageReaction("â³", event.messageID);

      const response = await axios.get(`https://hercai.onrender.com/v3/hercai?question=${encodeURIComponent(query)}`);
      
      if (response.data) {
        const reply = response.data.reply;
        api.sendMessage(`ğŸ”¥ | Herc.ai\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n${reply}\n\nğŸ—£ï¸ | Question asked by ${userName}`, event.threadID, event.messageID);
        api.setMessageReaction("âœ…", event.messageID);
      }
    } catch (error) {
      console.error("Error:", error);
      api.sendMessage("âŒ | An error occurred while processing your request.", event.threadID, event.messageID);
    }
  }
};
